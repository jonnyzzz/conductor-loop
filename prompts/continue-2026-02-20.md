# Conductor Loop - Continue Work Session (2026-02-20)

You are an orchestrator agent continuing work on the Conductor Loop project.

**Project root**: /Users/jonnyzzz/Work/conductor-loop
**Workflow guide**: /Users/jonnyzzz/Work/conductor-loop/THE_PROMPT_v5.md
**Plan**: /Users/jonnyzzz/Work/conductor-loop/THE_PLAN_v5.md
**Message Bus**: /Users/jonnyzzz/Work/conductor-loop/MESSAGE-BUS.md
**Issues**: /Users/jonnyzzz/Work/conductor-loop/ISSUES.md
**Run-agent script**: /Users/jonnyzzz/Work/conductor-loop/run-agent.sh
**Runs dir**: /Users/jonnyzzz/Work/conductor-loop/runs

## Mandatory First Steps

1. Read /Users/jonnyzzz/Work/conductor-loop/THE_PROMPT_v5.md — this is your primary workflow guide
2. Read /Users/jonnyzzz/Work/conductor-loop/AGENTS.md — project conventions
3. Read /Users/jonnyzzz/Work/conductor-loop/MESSAGE-BUS.md — understand current project state
4. Read /Users/jonnyzzz/Work/conductor-loop/ISSUES.md — understand open blockers
5. Read /Users/jonnyzzz/Work/conductor-loop/THE_PLAN_v5.md — understand what was planned and what remains

## Current Project State (as of 2026-02-20)

- **Build**: `go build ./...` passes (verified)
- **Tests**: Most pass. **CRITICAL**: `test/performance` FAILS:
  - `TestMessageBusThroughput`: 99.80 msg/sec (threshold requires 100+)
  - `TestRunCreationThroughput`: 39.80 runs/sec (threshold requires 40+)
- **Stages 1–5**: Implemented (Core Infrastructure, Agent System, Runner, API/Frontend, Tests)
- **Stage 6** (Documentation): `docs-user` ✅, `docs-examples` ✅, `docs-dev` — exists but may be incomplete
- **Last active session**: 2026-02-05 (see MESSAGE-BUS.md)

## Your Goals (in priority order)

### Priority 1: Fix Failing Performance Tests
The file `/Users/jonnyzzz/Work/conductor-loop/test/performance/benchmark_test.go` has two failing tests.
- Investigate whether the threshold is too strict (borderline: 99.80 vs 100, 39.80 vs 40) OR whether actual performance needs improvement
- Fix by either adjusting thresholds (if they are arbitrary) or improving actual message bus / run creation performance
- After fix: run `go test ./test/performance/...` to confirm green

### Priority 2: Complete Stage 6 Documentation (docs-dev)
- Review /Users/jonnyzzz/Work/conductor-loop/docs/dev/ — files exist, verify they are complete and accurate against the implementation
- Files: adding-agents.md, agent-protocol.md, architecture.md, contributing.md, development-setup.md, message-bus.md, ralph-loop.md, storage-layout.md, subsystems.md, testing.md
- Cross-check each doc against the actual implementation in /Users/jonnyzzz/Work/conductor-loop/internal/ and /Users/jonnyzzz/Work/conductor-loop/pkg/
- Fix any inaccuracies, fill in gaps, make sure they reflect the real code

### Priority 3: Dog-food the System
- Build the conductor binary: `go build -o conductor ./cmd/conductor`
- Build run-agent: `go build -o run-agent ./cmd/run-agent`
- Start the conductor server and use it to run an actual sub-task (e.g., a small code review or doc improvement task on the project itself)
- This tests the system end-to-end and validates it actually works
- Document any issues found in /Users/jonnyzzz/Work/conductor-loop/ISSUES.md

### Priority 4: Review Implementation and Collect Questions
- Do a thorough review of key implementation files
- Any open questions or design uncertainties: write them to a new file `/Users/jonnyzzz/Work/conductor-loop/QUESTIONS.md`
- Focus on: Ralph Loop edge cases, message bus concurrency, agent backend reliability, API correctness

## Agent Execution Instructions

Use `/Users/jonnyzzz/Work/conductor-loop/run-agent.sh` to spawn sub-agents for parallel work.

For each sub-agent task:
1. Write a prompt file to `/Users/jonnyzzz/Work/conductor-loop/prompts/task-<name>.md`
2. Run: `cd /Users/jonnyzzz/Work/conductor-loop && ./run-agent.sh claude /Users/jonnyzzz/Work/conductor-loop prompts/task-<name>.md`
3. Monitor with: `cd /Users/jonnyzzz/Work/conductor-loop && uv run python monitor-agents.py`

Suggested parallel sub-agents:
- **fix-perf-tests**: Investigate and fix the two failing performance benchmarks
- **review-dev-docs**: Review and improve docs/dev/ against actual implementation
- **dogfood-test**: Build binaries, start conductor, run a test task end-to-end

## Communication

- Log ALL significant actions, decisions, and results to /Users/jonnyzzz/Work/conductor-loop/MESSAGE-BUS.md (append-only)
- Log blockers to /Users/jonnyzzz/Work/conductor-loop/ISSUES.md
- Collect open questions in /Users/jonnyzzz/Work/conductor-loop/QUESTIONS.md

## Success Criteria

This session is successful when:
1. `go test ./...` shows NO failures (all green including performance tests)
2. docs/dev/ files are accurate and complete
3. Conductor binary runs and successfully executes at least one sub-task
4. MESSAGE-BUS.md has a summary of all work done
5. Any open questions are captured in QUESTIONS.md

Start now. Read the files, assess the state, and spawn sub-agents in parallel.
