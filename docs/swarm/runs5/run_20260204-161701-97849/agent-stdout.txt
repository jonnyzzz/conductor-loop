Perfect. Now I have all the information needed. Let me compile my analysis:

---

## Review of Topic 7: Environment Variable & Invocation Contract

### 1) External Facts Check

**Verified claims:**
- **Go filepath.Clean normalization**: Confirmed that `filepath.Clean()` performs OS-native path normalization using the platform's separator (verified via [Go documentation](https://pkg.go.dev/path/filepath) and [Golang guides](https://www.javaguides.net/2025/01/golang-filepath-clean-function.html)). It normalizes paths lexically without accessing the filesystem.

- **SIGTERM/SIGKILL grace period**: 30-second grace period is a standard practice, particularly in Kubernetes environments (verified via [Google Cloud best practices](https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-terminating-with-grace) and [SUSE Communities](https://www.suse.com/c/observability-sigkill-vs-sigterm-a-developers-guide-to-process-termination/)). The pattern of SIGTERM → wait → SIGKILL is well-established.

- **ISO-8601 UTC format**: Standard timestamp format for distributed systems (confirmed via multiple sources).

**No contradictions found.** All proposed defaults align with industry best practices.

---

### 2) TIPICS Updates

**Topic 7 section requires updates:**

- **Add decision**: Path normalization uses OS-native Go filepath.Clean (lexical normalization without filesystem access).
- **Add decision**: Full environment inheritance from parent process in MVP (no filtering/restrictions).
- **Add decision**: Signal handling follows SIGTERM → 30s wait → SIGKILL pattern; agents should flush state on SIGTERM.
- **Add decision**: Current date/time (ISO-8601 UTC) is injected into prompt preamble for agent context.
- **Remove from open questions**: All four questions in subsystem-env-contract-QUESTIONS.md now have clear answers and should be moved to decisions.
- **Clarify wording**: "RUN_FOLDER in prompt text" → more precise: "Task/run folder paths in prompt preamble text".

---

### 3) Spec Updates

**subsystem-env-contract.md:**
- Add section: "Path Normalization" → Use Go filepath.Clean; OS-native separators; lexical processing only (no filesystem access).
- Add section: "Environment Inheritance" → Full inheritance from parent process in MVP; no filtering; config-injected tokens are backend-specific.
- Expand "Error Messaging" section → Add signal handling: SIGTERM forwarded to process group, 30s grace period, then SIGKILL; agents should flush message bus + TASK_STATE on SIGTERM when possible.
- Add to "Prompt/Context Injection" section → Include current date/time as ISO-8601 UTC in prompt preamble.
- Add security note: Token injection is backend-specific; subsystem-agent-backend-*.md specs define the naming conventions per backend.

**subsystem-agent-protocol.md:**
- Add to "Cancellation Protocol" section → Clarify that 30s is the standard grace period (already mentions SIGTERM → 30s → SIGKILL, but could emphasize this aligns with industry standards).
- Cross-reference subsystem-env-contract.md for signal handling details.

**subsystem-runner-orchestration.md:**
- "Error Handling" section already mentions signal handling; add cross-reference to subsystem-env-contract.md for the detailed contract.
- Add note under "Components → run-agent job" → Mention that PATH prepending happens before agent spawn; run-agent binary location is added to the front.

---

### 4) Questions to Remove/Resolve

**subsystem-env-contract-QUESTIONS.md:**

All four questions should be **resolved and moved to decisions**:

1. **Q: Path normalization** → **A: OS-native using Go filepath.Clean (lexical processing; no filesystem access).**  
   *Resolution*: Standard Go behavior; no custom logic needed.

2. **Q: Environment inheritance** → **A: Full inheritance in MVP; no sandbox or filtering.**  
   *Resolution*: Simplest approach for MVP; aligns with "no enforced sandbox" decision from Agent Governance topic.

3. **Q: Signal handling contract** → **A: run-agent forwards SIGTERM to agent process group; 30s grace period; then SIGKILL. Agents should flush state on SIGTERM.**  
   *Resolution*: Industry-standard pattern (Kubernetes default); documented in subsystem-runner-orchestration.md "Termination" and subsystem-agent-protocol.md "Cancellation Protocol".

4. **Q: Date/time injection** → **A: Yes, ISO-8601 UTC timestamp injected into prompt preamble.**  
   *Resolution*: Agents need temporal context for logging/decisions; aligns with message bus `ts` field format.

---

### 5) New Open Questions

**subsystem-env-contract-QUESTIONS.md:**

1. **Q: Should UTF-8 encoding be enforced for prompt preamble paths, or rely on Go's default string handling?**  
   *Proposed default*: Rely on Go's native UTF-8 string handling; no explicit validation.  
   *A*: TBD.

2. **Q: Should the prompt preamble include the agent's delegation depth (current depth / max depth)?**  
   *Proposed default*: Yes, to help agents decide when to delegate vs. execute.  
   *A*: TBD.

3. **Q: What happens if an agent process ignores SIGTERM and exceeds the 30s grace period repeatedly?**  
   *Proposed default*: SIGKILL is sent; no retry logic; parent logs ERROR to message bus; Ralph restarts root if applicable.  
   *A*: TBD.

4. **Q: Should backend-specific token environment variable names be documented in subsystem-env-contract.md or only in subsystem-agent-backend-*.md?**  
   *Proposed default*: Only in subsystem-agent-backend-*.md to keep env-contract backend-agnostic.  
   *A*: TBD (current specs already follow this pattern; this question is for explicit confirmation).

---

**Sources:**
- [filepath package - path/filepath - Go Packages](https://pkg.go.dev/path/filepath)
- [Golang filepath Clean Function](https://www.javaguides.net/2025/01/golang-filepath-clean-function.html)
- [Kubernetes best practices: terminating with grace | Google Cloud Blog](https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-terminating-with-grace)
- [SIGKILL vs SIGTERM: Master Process Termination in Linux and Kubernetes | SUSE Communities](https://www.suse.com/c/observability-sigkill-vs-sigterm-a-developers-guide-to-process-termination/)
- [Graceful Shutdown in Go: Practical Patterns](https://victoriametrics.com/blog/go-graceful-shutdown/)
