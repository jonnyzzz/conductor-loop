I will read the relevant design documents and check the git history to understand the current state of the Frontend-Backend API Contract.
Here is the review for **Topic 10: Frontend-Backend API Contract**.

### 1) External facts check
*   (None required; standard REST/SSE/JSON patterns apply).

### 2) TIPICS updates
*   **Topic 10: Frontend-Backend API Contract**
    *   **Decisions:**
        *   **Protocol:** REST/JSON for state fetching/actions; SSE (`text/event-stream`) for real-time updates (Message Bus, Logs).
        *   **Core Endpoints:**
            *   `GET /api/projects`: List projects (scan `~/run-agent`).
            *   `GET /api/projects/{project_id}`: List tasks, project-level bus/facts.
            *   `GET /api/projects/{project_id}/tasks/{task_id}`: Task details, run hierarchy, task bus.
            *   `GET /api/files`: Read file content (query param `path`); **strictly jailed** to `~/run-agent`; read-only.
            *   `POST /api/tasks`: Create/Start task (payload: project, task_id, prompt).
            *   `GET /api/bus/stream`: SSE endpoint for message bus events (see Topic 1/3).
            *   `POST /api/bus`: Post message (see Topic 1/3).
        *   **Security:** Localhost only for MVP; no auth tokens required yet; Path traversal protection is critical for `/api/files`.
        *   **Type Sharing:** Manual TypeScript interface definition matching Go structs for MVP; OpenAPI generation deferred.
    *   **Open questions:**
        *   **Log Streaming Strategy:** Specific SSE endpoint per run (`/api/logs/stream?run_id=...`) vs. polling `output.md` vs. multiplexed stream.
        *   **Task Creation Response:** Does `POST /api/tasks` return immediately or wait for the process to start? (Likely returns `task_id` immediately).

### 3) Spec updates
*   **subsystem-monitoring-ui.md**
    *   Add **API Requirements** section listing the necessary endpoints (`/api/projects`, `/api/files`, etc.) to support the UI views.
    *   Specify that `GET /api/files` is required to fetch `prompt.md`, `output.md`, `TASK_STATE.md`, and attachments.
    *   Clarify that Task Creation uses `POST /api/tasks`.

*   **subsystem-runner-orchestration.md** (or a new `subsystem-api-contract.md` if preferred, but orchestration serves it)
    *   Add **API Server** section:
        *   Mention `run-agent serve` starts the HTTP server.
        *   Define strict path validation for file serving (reject `..`, absolute paths, or symlinks pointing outside).
        *   Define `POST /api/tasks` behavior: validates inputs, ensures project/task folders exist, writes `TASK.md`, invokes internal `run-agent task` logic in a goroutine.

### 4) Questions to remove/resolve
*   (None; existing questions in `TIPICS.md` are still valid or generic.)

### 5) New open questions
*   **subsystem-monitoring-ui-QUESTIONS.md**
    *   Q: How should the UI handle log streaming for multiple active runs? | Proposed default: One SSE connection per active run tab, or 2s polling of `output.md` for MVP simplicity. | A: TBD.
    *   Q: Does the backend need to parse Markdown/YAML for the UI, or just serve raw text? | Proposed default: Serve raw text; UI handles parsing (less backend logic). | A: TBD.

*   **subsystem-env-contract-QUESTIONS.md** (or monitoring)
    *   Q: How do we prevent path traversal in `GET /api/files`? | Proposed default: `filepath.Clean` + check prefix `~/run-agent`. | A: TBD.
